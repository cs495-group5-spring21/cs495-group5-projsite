<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>StoriesService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/stories.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#stories">stories</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#createStory">createStory</a>
                            </li>
                            <li>
                                <a href="#deleteStory">deleteStory</a>
                            </li>
                            <li>
                                <a href="#getImg">getImg</a>
                            </li>
                            <li>
                                <a href="#getStories">getStories</a>
                            </li>
                            <li>
                                <a href="#getStoriesHomePage">getStoriesHomePage</a>
                            </li>
                            <li>
                                <a href="#getStoriesHomePageMembers">getStoriesHomePageMembers</a>
                            </li>
                            <li>
                                <a href="#getStoriesMembers">getStoriesMembers</a>
                            </li>
                            <li>
                                <a href="#getStoriesPublic">getStoriesPublic</a>
                            </li>
                            <li>
                                <a href="#getStory">getStory</a>
                            </li>
                            <li>
                                <a href="#updateStory">updateStory</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(db: AngularFirestore, storage: AngularFireStorage)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="11" class="link-to-prism">src/app/services/stories.service.ts:11</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>db</td>
                                                  
                                                        <td>
                                                                    <code>AngularFirestore</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>storage</td>
                                                  
                                                        <td>
                                                                    <code>AngularFireStorage</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createStory"></a>
                    <span class="name">
                        <b>
                            createStory
                        </b>
                        <a href="#createStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createStory(data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="46"
                            class="link-to-prism">src/app/services/stories.service.ts:46</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Adds a story document to the stories collection in our database.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>All of the necessary information to fill out the story interface and 
create a complete story document in our database.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Promise&lt;DocumentReference&lt;Story&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>A call to the database with the completed story document to be added
to the stories collection in our database. </p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteStory"></a>
                    <span class="name">
                        <b>
                            deleteStory
                        </b>
                        <a href="#deleteStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>deleteStory(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="56"
                            class="link-to-prism">src/app/services/stories.service.ts:56</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Takes the id of the story document to be deleted and then deletes it from the database. </p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The ID of the story document to be deleted from the database. </p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A call to the database to delete the story document containing the matching ID.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getImg"></a>
                    <span class="name">
                        <b>
                            getImg
                        </b>
                        <a href="#getImg"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getImg(path: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="65"
                            class="link-to-prism">src/app/services/stories.service.ts:65</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the image from the given path and returns it&#39;s download URL.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>path</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The path to be used to </p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStories"></a>
                    <span class="name">
                        <b>
                            getStories
                        </b>
                        <a href="#getStories"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStories()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="22"
                            class="link-to-prism">src/app/services/stories.service.ts:22</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all story documents from the stories collection sorted in descending order by date.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>The query variable containing every story document in the stories database collection 
sorted in descending order by date.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStoriesHomePage"></a>
                    <span class="name">
                        <b>
                            getStoriesHomePage
                        </b>
                        <a href="#getStoriesHomePage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStoriesHomePage()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="86"
                            class="link-to-prism">src/app/services/stories.service.ts:86</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the story documents which are to be posted on the public facing home page of the website from the stories collection in the database.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Story[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The array of story documents where the postPublic boolean variable is true and are sorted in descending order by date; 
this array contains a limit of 8 as to prevent clutter on the home page.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStoriesHomePageMembers"></a>
                    <span class="name">
                        <b>
                            getStoriesHomePageMembers
                        </b>
                        <a href="#getStoriesHomePageMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStoriesHomePageMembers()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="159"
                            class="link-to-prism">src/app/services/stories.service.ts:159</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the story documents which are to be posted on the members home page of the website from the stories collection in the database.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Story[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The array of story documents where the postMembers boolean variable is true and are sorted in descending order by date; 
this array contains a limit of 2 as to prevent clutter on the members home page.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStoriesMembers"></a>
                    <span class="name">
                        <b>
                            getStoriesMembers
                        </b>
                        <a href="#getStoriesMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStoriesMembers()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="135"
                            class="link-to-prism">src/app/services/stories.service.ts:135</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets all of the story documents from the stories collection in the database to be posted to the members news feed on our website.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Story[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>An array of story documents where the postMembers boolean variable is true and are sorted in descending order by date
to be shown on the members news page of our website. </p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStoriesPublic"></a>
                    <span class="name">
                        <b>
                            getStoriesPublic
                        </b>
                        <a href="#getStoriesPublic"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStoriesPublic()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="110"
                            class="link-to-prism">src/app/services/stories.service.ts:110</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets all of the story documents that are to be posted publicly from the stories collection in our database. </p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Story[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The array of story documents where the postPublic boolean variable is true and are sorted in descending order by date 
to be shown on the public facing news section of the website. </p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStory"></a>
                    <span class="name">
                        <b>
                            getStory
                        </b>
                        <a href="#getStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStory(id: string | undefined)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="35"
                            class="link-to-prism">src/app/services/stories.service.ts:35</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a story document from the stories collection in our database by passing 
into the function an id and returning the story document with the matching id.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                            <code>string | undefined</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The ID of the story document to be returned from the database.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Story.html" target="_self" >Observable&lt;Story | undefined&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>The story document containing the matching id passed in as a parameter.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateStory"></a>
                    <span class="name">
                        <b>
                            updateStory
                        </b>
                        <a href="#updateStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateStory(id: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="76"
                            class="link-to-prism">src/app/services/stories.service.ts:76</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Updates a story document in the stories database collection using the data passed
  into the function to update some or all of the documents current values. </p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The ID of the story document to be updated.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The values that will be used to update the story document. </p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A call to the database to update the story document using the data passed in without overwriting the entire document.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="stories"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            stories</b>
                            <a href="#stories"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/Story.html" target="_self" >Story[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/services/stories.service.ts:15</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { AngularFirestore, DocumentReference } from &#x27;@angular/fire/firestore&#x27;;
import { AngularFireStorage } from &#x27;@angular/fire/storage&#x27;;
import { Observable } from &#x27;rxjs&#x27;;
import { take } from &#x27;rxjs/operators&#x27;;
import { Story } from &#x27;../interfaces/story&#x27;;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class StoriesService {

  constructor(private db: AngularFirestore, private storage: AngularFireStorage) { }

  private stories !: Story[];

  /**
   * Returns all story documents from the stories collection sorted in descending order by date.
   * @returns The query variable containing every story document in the stories database collection 
   * sorted in descending order by date.
   */
  getStories(): Observable&lt;any&gt; {
    let query &#x3D; this.db.collection&lt;Story&gt;(&#x27;stories&#x27;, ref &#x3D;&gt; ref.orderBy(&quot;date&quot;, &quot;desc&quot;))
          .valueChanges({ idField: &#x27;id&#x27; });
      
      return query;
  }

  /**
   * Returns a story document from the stories collection in our database by passing 
   * into the function an id and returning the story document with the matching id.
   * @param id The ID of the story document to be returned from the database.
   * @returns The story document containing the matching id passed in as a parameter.
   */
  getStory(id: string | undefined): Observable&lt;Story | undefined&gt; {
    return this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).doc(id).valueChanges();
  }

  /**
   * Adds a story document to the stories collection in our database.
   * @param data All of the necessary information to fill out the story interface and 
   * create a complete story document in our database.
   * @returns A call to the database with the completed story document to be added
   *  to the stories collection in our database. 
   */
  createStory(data: any): Promise&lt;DocumentReference&lt;Story&gt;&gt; {
    //console.log(data);
    return this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).add(data);
  }

  /**
   * Takes the id of the story document to be deleted and then deletes it from the database. 
   * @param id The ID of the story document to be deleted from the database. 
   * @returns A call to the database to delete the story document containing the matching ID.
   */
  deleteStory(id: string): Promise&lt;void&gt; {
    return this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).doc(id).delete();
  }

  /**
   * Gets the image from the given path and returns it&#x27;s download URL.
   * @param path The path to be used to 
   * @returns 
   */
  getImg(path: string) {
    return this.storage.refFromURL(&#x27;gs://ariawebsitedb.appspot.com/&#x27; + path).getDownloadURL();
  }

  /**
   * Updates a story document in the stories database collection using the data passed
   *  into the function to update some or all of the documents current values. 
   * @param id The ID of the story document to be updated.
   * @param data The values that will be used to update the story document. 
   * @returns A call to the database to update the story document using the data passed in without overwriting the entire document.
   */
  updateStory(id: any, data: any): Promise&lt;void&gt; {
    const docRef &#x3D; this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).doc(id);
    return docRef.update(data);
  }

/**
 * Gets the story documents which are to be posted on the public facing home page of the website from the stories collection in the database.
 * @returns The array of story documents where the postPublic boolean variable is true and are sorted in descending order by date; 
 * this array contains a limit of 8 as to prevent clutter on the home page.
 */
  getStoriesHomePage(): Story[]{
    var s: Story[] &#x3D; [];
    this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).ref.where(&#x27;postPublic&#x27;, &#x27;&#x3D;&#x3D;&#x27;,true).orderBy(&quot;date&quot;, &quot;desc&quot;).limit(8).get().then((stories) &#x3D;&gt; {
      stories.forEach((story) &#x3D;&gt;{
        var newS &#x3D; story.data();
        newS.id &#x3D; story.id;
        var ts: any &#x3D; newS.date
        newS.date &#x3D; ts.toDate();
        var u &#x3D; newS.img;
        newS.img &#x3D; &quot;&quot;;
        s.push(newS);
        if(u) this.storage.refFromURL(&#x27;gs://ariawebsitedb.appspot.com/&#x27; + u).getDownloadURL().pipe(take(1)).subscribe((url) &#x3D;&gt;{
          newS.img &#x3D; url;
        });
      });
    });
    return s;
  }

  /**
   * Gets all of the story documents that are to be posted publicly from the stories collection in our database. 
   * @returns The array of story documents where the postPublic boolean variable is true and are sorted in descending order by date 
   * to be shown on the public facing news section of the website. 
   */
  getStoriesPublic(): Story[]{
    var s: Story[] &#x3D; [];
    this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).ref.where(&#x27;postPublic&#x27;, &#x27;&#x3D;&#x3D;&#x27;,true).orderBy(&quot;date&quot;, &quot;desc&quot;).get().then((stories) &#x3D;&gt; {
      stories.forEach((story) &#x3D;&gt;{
        var newS &#x3D; story.data();
        newS.id &#x3D; story.id;
        
        var ts: any &#x3D; newS.date
        newS.date &#x3D; ts.toDate();
        var u &#x3D; newS.img;
        newS.img &#x3D; &quot;&quot;;
        s.push(newS);
        if(u) this.storage.refFromURL(&#x27;gs://ariawebsitedb.appspot.com/&#x27; + u).getDownloadURL().pipe(take(1)).subscribe((url) &#x3D;&gt;{
          newS.img &#x3D; url;
        });
      });
    });
    return s;
  }

  /**
   * Gets all of the story documents from the stories collection in the database to be posted to the members news feed on our website.
   * @returns An array of story documents where the postMembers boolean variable is true and are sorted in descending order by date
   * to be shown on the members news page of our website. 
   */
  getStoriesMembers(): Story[]{
    var s: Story[] &#x3D; [];
    this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).ref.where(&#x27;postMembers&#x27;, &#x27;&#x3D;&#x3D;&#x27;,true).orderBy(&quot;date&quot;, &quot;desc&quot;).get().then((stories) &#x3D;&gt; {
      stories.forEach((story) &#x3D;&gt;{
        var newS &#x3D; story.data();
        newS.id &#x3D; story.id;
        var ts: any &#x3D; newS.date
        newS.date &#x3D; ts.toDate();
        var u &#x3D; newS.img;
        newS.img &#x3D; &quot;&quot;;
        s.push(newS);
        if(u) this.storage.refFromURL(&#x27;gs://ariawebsitedb.appspot.com/&#x27; + u).getDownloadURL().pipe(take(1)).subscribe((url) &#x3D;&gt;{
          newS.img &#x3D; url;
        });
      });
    });
    return s;
  }

  /**
 * Gets the story documents which are to be posted on the members home page of the website from the stories collection in the database.
 * @returns The array of story documents where the postMembers boolean variable is true and are sorted in descending order by date; 
 * this array contains a limit of 2 as to prevent clutter on the members home page.
 */
  getStoriesHomePageMembers(): Story[]{
    var s: Story[] &#x3D; [];
    this.db.collection&lt;Story&gt;(&#x27;stories&#x27;).ref.where(&#x27;postMembers&#x27;, &#x27;&#x3D;&#x3D;&#x27;,true).orderBy(&quot;date&quot;, &quot;desc&quot;).limit(2).get().then((stories) &#x3D;&gt; {
      stories.forEach((story) &#x3D;&gt;{
        var newS &#x3D; story.data();
        newS.id &#x3D; story.id;
        var ts: any &#x3D; newS.date
        newS.date &#x3D; ts.toDate();
        var u &#x3D; newS.img;
        newS.img &#x3D; &quot;&quot;;
        s.push(newS);
        if(u) this.storage.refFromURL(&#x27;gs://ariawebsitedb.appspot.com/&#x27; + u).getDownloadURL().pipe(take(1)).subscribe((url) &#x3D;&gt;{
          newS.img &#x3D; url;
        });
      });
    });
    return s;
  }
} </code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'StoriesService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
